<!doctype html>
<html>

	<head>

		<meta charset="utf-8">
		<title>xian</title>
		<script src="echarts.min.js"></script>

	</head>

	<body>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width: 1920px;height:800px;align:center"></div>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    let myChart = echarts.init(document.getElementById('main'));
 var dataMap = {};
function dataFormatter(obj) {
    var pList = ['省本级','厅本级','省假肢康复中心','广州市','深圳市','珠海市','汕头市','南澳县','佛山市','韶关市','南雄市','仁化县','乳源瑶族自治县','翁源县','河源市','紫金县','龙川县','连平县','梅州市','兴宁市','五华县','丰顺县','大埔县','惠州市','博罗县','汕尾市','陆河县','陆丰市','海丰县','东莞市','中山市','江门市','阳江市','阳春市','湛江市','徐闻县','廉江市','雷州市','茂名市','高州市','化州市','肇庆市','封开县','怀集县','德庆县','广宁县','清远市','英德市','连山壮族瑶族自治县','连南瑶族自治县','潮州市','饶平县','揭阳市','普宁市','揭西县','惠来县','云浮市','罗定市','新兴县'];
    var temp;
    for (var year = 2016; year <= 2018; year++) {
        var max = 0;
        var sum = 0;
        temp = obj[year];
        for (var i = 0, l = temp.length; i < l; i++) {
            max = Math.max(max, temp[i]);
            sum += temp[i];
            obj[year][i] = {
                name : pList[i],
                value : temp[i]
            }
        }
        obj[year + 'max'] = Math.floor(max / 100) * 100;
        obj[year + 'sum'] = sum;
    }
    return obj;
}

dataMap.dataOLD = dataFormatter({
    //max : 367,
    2018:[0,0,0,0,0,0,220,45,0,84,44,31,44,29,84,56,59,54,131,52,48,48,48,64,31,54,100,59,55,0,0,92,59,34,280,164,67,128,160,61,72,22,33,36,31,34,208,58,72,72,62,64,156,110,103,101,185,35,566],
    2017:[0,0,0,0,0,0,228,38,0,168,55,28,28,28,135,36,63,63,261,66,66,66,66,164,41,29,29,56,56,0,0,136,138,46,265,44,44,44,205,68,68,149,37,37,37,37,160,32,32,32,100,77,127,63,63,63,93,31,31],
    2016:[0,0,0,0,0,0,92,52,0,203,0,0,126,67,95,0,0,70,234,0,92,0,0,89,158,192,71,0,0,0,0,113,275,0,310,0,114,0,345,0,0,129,0,119,120,154,188,275,0,0,74,0,367,0,0,0,288,104,0],
    
});

dataMap.dataDISABLED = dataFormatter({
    //max : 1000,
    2018:[0,0,0,0,0,0,123,9,0,37,32,13,25,17,54,38,40,34,95,53,55,41,34,33,17,31,25,41,42,0,0,56,48,32,56,21,41,32,77,27,41,0,16,28,18,21,69,33,25,25,27,41,38,44,32,34,39,35,15],
    2017:[1000,500,500,0,0,0,0,0,0,93,0,0,0,0,0,0,0,0,104,0,0,0,0,94,0,85,0,0,0,0,0,0,105,0,0,0,0,0,0,0,0,98,0,0,0,0,0,0,0,0,0,0,118,0,0,0,0,0,0],
    2016:[724 ,0 ,724 ,0 ,0 ,0 ,0 ,0 ,0,0 ,0,0,0 ,0 ,0 ,0 ,0,0 ,0 ,0,0 ,0,0,0 ,0 ,0 ,0 ,0 ,0,0,0 ,0 ,0 ,0,0 ,0,0 ,0,0 ,0,0,0 ,0,0 ,0 ,0 ,0 ,0 ,0,0,0 ,0,0 ,0 ,0 ,0 ,0 ,0 ,0],
});


dataMap.dataCHILD = dataFormatter({
    //max : 4000,
    2018:[34,34,34,31,42,99,18,0,4,330,0,0,0,0,4,0,88,0,110,0,0,0,88,3,0,104,0,104,0,3,15,182,101,0,373,89,90,0,87,0,0,1,0,0,0,0,98,0,0,0,102,90,91,0,0,0,1,0,0],
    2017:[1000,82,82,130,65,40,68,0,51,94,28,0,27,0,49,28,0,28,83,28,29,28,28,47,30,42,28,30,29,48,34,48,82,40,92,31,32,31,105,30,34,39,28,31,28,28,82,0,0,0,49,29,60,30,28,28,56,29,29],
    2016:[480.41 ,359.61 ,120.80 ,35.54 ,41.64 ,11.82 ,1.31 ,0.00 ,0.00 ,90.00 ,0.00 ,0.00 ,0.00 ,0.00 ,100.00 ,34.00 ,0.00 ,0.00 ,160.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,1.96 ,70.00 ,50.00 ,0.00 ,0.00 ,4.80 ,1.18 ,4.52 ,0.00 ,1.08 ,0.00 ,0.00 ,0.00 ,6.25 ,0.00 ,0.00 ,0.34 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,40.00 ,70.00 ,40.00 ,256.59 ,0.00 ,0.00],
});

dataMap.dataSOCIL = dataFormatter({
    //max : 180,
    2018:[0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,0.00 ,8.40 ,0.56 ,0.00 ,7.84 ,0.56 ,1.12 ,0.56 ,2.24 ,2.24 ,0.56 ,0.56 ,0.56 ,7.28 ,2.24 ,80.56 ,0.56 ,0.56 ,6.72 ,3.36 ,1.68 ,0.56 ,1.12 ,1.12 ,0.00 ,0.00 ,127.60 ,3.36 ,2.24 ,6.16 ,0.56 ,1.12 ,0.56 ,3.36 ,0.56 ,1.12 ,3.36 ,0.56 ,1.68 ,3.36 ,1.12 ,85.48 ,1.68 ,1.12 ,1.68 ,3.36 ,2.24 ,1.68 ,1.12 ,1.12 ,0.56 ,3.92 ,73.68 ,1.68 ],
    2017:[0,0,0,0,0,0,6,0,0,18,0,0,0,0,20,0,0,0,6,0,0,0,0,0,0,20,0,0,0,0,0,0,69,0,20,0,0,0,0,0,0,84,0,0,0,0,90,0,0,0,24,0,96,0,0,0,0,0,0],
    2016:[0 ,0,0,0,0,0,19,0,0,19,0,0,0,0,49,0,0,0,19,0,0,0,0,0,0,20,150,0,0,0,0,0,74,0,20,0,0,0,19,0,0,150,0,0,0,0,19,0,0,0,20,0,20,0,0,0,180,0,0],
});

option = {
    baseOption: {
        timeline: {
            // y: 0,
            axisType: 'category',
            // realtime: false,
            // loop: false,
            autoPlay: true,
            // currentIndex: 2,
            playInterval: 2000,
            // controlStyle: {
            //     position: 'left'
            // },
            data: [
                '2016-01-01','2017-01-01',
                {
                    value: '2018-01-01',
                    tooltip: {
                        formatter: '{b} GDP达到一个高度'
                    },
                    symbol: 'diamond',
                    symbolSize: 16
                },
                
            ],
            label: {
                formatter : function(s) {
                    return (new Date(s)).getFullYear();
                }
            }
        },
        title: {
            subtext: '数据来自广东省民政厅'
        },
        tooltip: {
        },
        legend: {
            x: 'right',
            data: ['老年人福利类项目', '残疾人福利类项目', '儿童福利类项目', '社会公益类项目'],
            selected: {
                '社会公益类项目': false
            }
        },
        calculable : true,
        grid: {
            top: 80,
            bottom: 100,
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow',
                    label: {
                        show: true,
                        formatter: function (params) {
                            return params.value.replace('\n', '');
                        }
                    }
                }
            }
        },
        xAxis: [
            {
                'type':'category',
                'axisLabel':{'interval':0},
                'data':[
                    '省本级','\n厅本级','省假肢康复中心','\n广州市','深圳市','\n珠海市','汕头市','\n南澳县','佛山市','\n韶关市','南雄市','\n仁化县','乳源瑶族自治县','\n翁源县','河源市','\n紫金县','龙川县','\n连平县','梅州市','\n兴宁市','五华县','\n丰顺县','大埔县','\n惠州市','博罗县','\n汕尾市','陆河县','\n陆丰市','海丰县','\n东莞市','中山市','\n江门市','阳江市','\n阳春市','湛江市','\n徐闻县','廉江市','\n雷州市','茂名市','\n高州市','化州市','\n肇庆市','封开县','\n怀集县','德庆县','\n广宁县','清远市','\n英德市','连山壮族瑶族自治县','\n连南瑶族自治县','潮州市','\n饶平县','揭阳市','\n普宁市','揭西县','\n惠来县','云浮市','\n罗定市','新兴县'
                ],
                splitLine: {show: false}
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '社会公益类项目（万元）'
            }
        ],
        series: [
            {name: '社会公益类项目', type: 'bar'},
            {name: '儿童福利类项目', type: 'bar'},
            {name: '残疾人福利类项目', type: 'bar'},
            {name: '老年人福利类项目', type: 'bar'},
            
            {
                name: '分类项目占比',
                type: 'pie',
                center: ['75%', '35%'],
                radius: '28%',
                z: 100
            }
        ]
    },
    options: [
        {
            title: {text: '2016年中央彩票公益金项目汇总'},
            series: [
                {data: dataMap.dataSOCIL['2016']},
                {data: dataMap.dataCHILD['2016']},
                {data: dataMap.dataDISABLED['2016']},
                {data: dataMap.dataOLD['2016']},
                
                
                {data: [
                    {name: '老年人福利类项目', value: dataMap.dataOLD['2016sum']},
                    {name: '残疾人福利类项目', value: dataMap.dataDISABLED['2016sum']},
                    {name: '儿童福利类项目', value: dataMap.dataCHILD['2016sum']},
                    {name: '社会公益类项目', value: dataMap.dataSOCIL['2016sum']}
                ]}
            ]
        },
        {
            title : {text: '2017年中央彩票公益金项目汇总'},
            series : [
                {data: dataMap.dataSOCIL['2017']},
                {data: dataMap.dataCHILD['2017']},
                {data: dataMap.dataDISABLED['2017']},
                {data: dataMap.dataOLD['2017']},
                
            
                {data: [
                    {name: '老年人福利类项目', value: dataMap.dataOLD['2017sum']},
                    {name: '残疾人福利类项目', value: dataMap.dataDISABLED['2017sum']},
                    {name: '儿童福利类项目', value: dataMap.dataCHILD['2017sum']},
                    {name: '社会公益类项目', value: dataMap.dataSOCIL['2017sum']}
                ]}
            ]
        },
        {
             title : {text: '2018年中央彩票公益金项目汇总'},
            series : [
                {data: dataMap.dataSOCIL['2018']},
                {data: dataMap.dataCHILD['2018']},
                {data: dataMap.dataDISABLED['2018']},
                {data: dataMap.dataOLD['2018']},

                
                {data: [
                    {name: '老年人福利类项目', value: dataMap.dataOLD['2018sum']},
                    {name: '残疾人福利类项目', value: dataMap.dataDISABLED['2018sum']},
                    {name: '儿童福利类项目', value: dataMap.dataCHILD['2018sum']},
                    {name: '社会公益类项目', value: dataMap.dataSOCIL['2018sum']}
                ]}
            ]
        }, 
    ]
};

 myChart.setOption(option);
    </script>

	</body>

</html>
